{"version":3,"file":"manage.min.js","sources":["../src/manage.js"],"sourcesContent":["// Javascript module for manage page\r\n// Copyright 2018 Howard Miller (howardsmiller@gmail.com)\r\n\r\ndefine(['jquery', 'core/config', 'core/ajax', 'core/notification', 'core/str'], function($, mdlcfg, ajax, notification, str) {\r\n\r\n    return {\r\n\r\n        init: function() {\r\n\r\n\r\n            // Enable Bootstrap tooltips\r\n            require(['theme_boost/loader']);\r\n            require(['theme_boost/tooltip'], function() {\r\n                $('[data-toggle=\"tooltip\"]').tooltip();\r\n            });\r\n\r\n\r\n            // Update the eye icon\r\n            function _redraw(icon, state) {\r\n                icon.removeClass('fa-eye fa-eye-slash');\r\n                if (state == 1) {\r\n                    icon.addClass('fa-eye');\r\n                } else {\r\n                    icon.addClass('fa-eye-slash');\r\n                }\r\n            }\r\n\r\n\r\n            // Handle active/hidden\r\n            $('.lp_active').click(function() {\r\n                var icon = $(this).find('i');\r\n                var id = $(this).data('id');\r\n                var state = $(this).data('state');\r\n\r\n                // flip current state\r\n                if (state == 0) {\r\n                    state = 1;\r\n                } else {\r\n                    state = 0;\r\n                }\r\n                $(this).data('state', state);\r\n\r\n                // call the web service\r\n                ajax.call([{\r\n                    methodname: 'local_iomad_learningpath_activate',\r\n                    args: { pathid: id, state: state },\r\n                    done: _redraw(icon, state),\r\n                    fail: notification.exception,\r\n                }]);\r\n\r\n                // false stops the normal link behaviour!\r\n                return false;\r\n            });\r\n\r\n\r\n            // Handle delete button\r\n            $('.lp_delete').click(function() {\r\n                var id = $(this).data('id');\r\n                str.get_strings([\r\n                    {key: 'confirm', component: 'local_iomad_learningpath'},\r\n                    {key: 'confirmdelete', component: 'local_iomad_learningpath'},\r\n                    {key: 'yes'},\r\n                    {key: 'no'}\r\n                ]).done(function(s) {\r\n                    notification.confirm(s[0], s[1], s[2], s[3], function() {\r\n                        ajax.call([{\r\n                            methodname: 'local_iomad_learningpath_deletepath',\r\n                            args: { pathid: id },\r\n                            done: function() {\r\n                                location.reload();\r\n                            },\r\n                            fail: notification.exception,\r\n                        }]);\r\n                    });\r\n                });\r\n\r\n                // False stops normal link behaviour!!\r\n                return false;\r\n            });\r\n\r\n\r\n\r\n            // Handle copy button\r\n            $('.lp_copy').click(function() {\r\n                var id = $(this).data('id');\r\n                str.get_strings([\r\n                    {key: 'confirm', component: 'local_iomad_learningpath'},\r\n                    {key: 'confirmcopy', component: 'local_iomad_learningpath'},\r\n                    {key: 'yes'},\r\n                    {key: 'no'}\r\n                ]).done(function(s) {\r\n                    notification.confirm(s[0], s[1], s[2], s[3], function() {\r\n                        ajax.call([{\r\n                            methodname: 'local_iomad_learningpath_copypath',\r\n                            args: { pathid: id },\r\n                            done: function() {\r\n                                location.reload();\r\n                            },\r\n                            fail: notification.exception,\r\n                        }]);\r\n                    });\r\n                });\r\n\r\n                // False stops normal link behaviour!!\r\n                return false;\r\n            });\r\n\r\n        }\r\n    };\r\n\r\n});\r\n"],"names":["define","$","mdlcfg","ajax","notification","str","init","_redraw","icon","state","removeClass","addClass","require","tooltip","click","this","find","id","data","call","methodname","args","pathid","done","fail","exception","get_strings","key","component","s","confirm","location","reload"],"mappings":"AAGAA,yCAAO,CAAC,SAAU,cAAe,YAAa,oBAAqB,aAAa,SAASC,EAAGC,OAAQC,KAAMC,aAAcC,WAE7G,CAEHC,KAAM,oBAWOC,QAAQC,KAAMC,OACnBD,KAAKE,YAAY,uBACJ,GAATD,MACAD,KAAKG,SAAS,UAEdH,KAAKG,SAAS,gBAZtBC,QAAQ,CAAC,uBACTA,QAAQ,CAAC,wBAAwB,WAC7BX,EAAE,2BAA2BY,aAgBjCZ,EAAE,cAAca,OAAM,eACdN,KAAOP,EAAEc,MAAMC,KAAK,KACpBC,GAAKhB,EAAEc,MAAMG,KAAK,MAClBT,MAAQR,EAAEc,MAAMG,KAAK,gBAIrBT,MADS,GAATA,MACQ,EAEA,EAEZR,EAAEc,MAAMG,KAAK,QAAST,OAGtBN,KAAKgB,KAAK,CAAC,CACPC,WAAY,oCACZC,KAAM,CAAEC,OAAQL,GAAIR,MAAOA,OAC3Bc,KAAMhB,QAAQC,KAAMC,OACpBe,KAAMpB,aAAaqB,cAIhB,KAKXxB,EAAE,cAAca,OAAM,eACdG,GAAKhB,EAAEc,MAAMG,KAAK,aACtBb,IAAIqB,YAAY,CACZ,CAACC,IAAK,UAAWC,UAAW,4BAC5B,CAACD,IAAK,gBAAiBC,UAAW,4BAClC,CAACD,IAAK,OACN,CAACA,IAAK,QACPJ,MAAK,SAASM,GACbzB,aAAa0B,QAAQD,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAI,WACzC1B,KAAKgB,KAAK,CAAC,CACPC,WAAY,sCACZC,KAAM,CAAEC,OAAQL,IAChBM,KAAM,WACFQ,SAASC,UAEbR,KAAMpB,aAAaqB,oBAMxB,KAMXxB,EAAE,YAAYa,OAAM,eACZG,GAAKhB,EAAEc,MAAMG,KAAK,aACtBb,IAAIqB,YAAY,CACZ,CAACC,IAAK,UAAWC,UAAW,4BAC5B,CAACD,IAAK,cAAeC,UAAW,4BAChC,CAACD,IAAK,OACN,CAACA,IAAK,QACPJ,MAAK,SAASM,GACbzB,aAAa0B,QAAQD,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAI,WACzC1B,KAAKgB,KAAK,CAAC,CACPC,WAAY,oCACZC,KAAM,CAAEC,OAAQL,IAChBM,KAAM,WACFQ,SAASC,UAEbR,KAAMpB,aAAaqB,oBAMxB"}