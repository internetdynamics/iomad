{"version":3,"file":"local_email.min.js","sources":["../src/local_email.js"],"sourcesContent":["define(['jquery'], function($) {\r\n\r\n    return {\r\n        init: function() {\r\n\r\n            function InsertAtCaret(myValue) {\r\n\r\n                return $(\".insertatcaretactive\").each(function(i) {\r\n                    if (typeof this.value === 'undefined') {\r\n                        var sel, range, html;\r\n                        if (window.getSelection) {\r\n                            sel = window.getSelection();\r\n                            if (sel.getRangeAt && sel.rangeCount) {\r\n                                range = sel.getRangeAt(0);\r\n                                range.deleteContents();\r\n                                range.insertNode( document.createTextNode(myValue) );\r\n                            }\r\n                        } else if (document.selection && document.selection.createRange) {\r\n                            document.selection.createRange().text = myValue;\r\n                        }\r\n                    } else {\r\n                        if (document.selection) {\r\n                            //For browsers like Internet Explorer\r\n                            this.focus();\r\n                            sel = document.selection.createRange();\r\n                            sel.text = myValue;\r\n                            this.focus();\r\n                        } else if (this.selectionStart || this.selectionStart == '0') {\r\n                            //For browsers like Firefox and Webkit based\r\n                            var startPos = this.selectionStart;\r\n                            var endPos = this.selectionEnd;\r\n                            var scrollTop = this.scrollTop;\r\n                            this.value = this.value.substring(0, startPos) + myValue + this.value.substring(endPos, this.value.length);\r\n                            this.focus();\r\n                            this.selectionStart = startPos + myValue.length;\r\n                            this.selectionEnd = startPos + myValue.length;\r\n                            this.scrollTop = scrollTop;\r\n                        } else {\r\n                            this.value += myValue;\r\n                            this.focus();\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n\r\n\r\n            $(\".inputholder\").on(\"focus\", function() {\r\n                var EditorInput = $(this).parent().find(\".ftext\");\r\n                $(\".insertatcaretactive\").removeClass(\"insertatcaretactive\");\r\n                $(this).addClass(\"insertatcaretactive\");\r\n            });\r\n\r\n            $(\"#fitem_id_body_editor\").on(\"click\", function() {\r\n                var EditorInput = $(this).parent().find(\"#id_body_editoreditable\");\r\n                $(\".insertatcaretactive\").removeClass(\"insertatcaretactive\");\r\n                EditorInput.addClass(\"insertatcaretactive\");\r\n            });\r\n\r\n            $(\"#fitem_id_signature_editor\").on(\"click\", function() {\r\n                var EditorInput = $(this).parent().find(\"#id_body_editoreditable\");\r\n                $(\".insertatcaretactive\").removeClass(\"insertatcaretactive\");\r\n                EditorInput.addClass(\"insertatcaretactive\");\r\n            });\r\n\r\n            $('.clickforword').mousedown(function(e) {\r\n                e.preventDefault(); //to prevent the default behaviour of a tag\r\n                InsertAtCaret(\"{\" + this.text + \"}\" );\r\n            });\r\n\r\n            // Deal with edit allow button.\r\n            $('.emailclicktoedit').click(function(e) {\r\n                e.preventDefault(); //to prevent the default behaviour of a tag\r\n                $('#isediting').val(1);\r\n                $('#id_emailto').prop('disabled', false);\r\n                $('#id_emailtoother').prop('disabled', false);\r\n                $('#id_emailfrom').prop('disabled', false);\r\n                $('#id_emailfromother').prop('disabled', false);\r\n                $('#id_emailcc').prop('disabled', false);\r\n                $('#id_emailccother').prop('disabled', false);\r\n                $('#id_emailreplyto').prop('disabled', false);\r\n                $('#id_emailreplytoother').prop('disabled', false);\r\n                $('#id_subject').prop('disabled', false);\r\n                $('#id_body_editor').prop('disabled', false);\r\n                $('#id_companylogo').prop('disabled', false);\r\n                $('#id_signature_editor').prop('disabled', false);\r\n                $('#id_save').prop('disabled', false);\r\n                $('#id_edit').prop('disabled', true);\r\n            });\r\n        }\r\n    };\r\n});\r\n"],"names":["define","$","init","on","this","parent","find","removeClass","addClass","EditorInput","mousedown","e","myValue","preventDefault","text","each","i","sel","range","value","window","getSelection","getRangeAt","rangeCount","deleteContents","insertNode","document","createTextNode","selection","createRange","focus","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring","length","click","val","prop"],"mappings":"AAAAA,iCAAO,CAAC,WAAW,SAASC,SAEjB,CACHC,KAAM,WA2CFD,EAAE,gBAAgBE,GAAG,SAAS,WACRF,EAAEG,MAAMC,SAASC,KAAK,UACxCL,EAAE,wBAAwBM,YAAY,uBACtCN,EAAEG,MAAMI,SAAS,0BAGrBP,EAAE,yBAAyBE,GAAG,SAAS,eAC/BM,YAAcR,EAAEG,MAAMC,SAASC,KAAK,2BACxCL,EAAE,wBAAwBM,YAAY,uBACtCE,YAAYD,SAAS,0BAGzBP,EAAE,8BAA8BE,GAAG,SAAS,eACpCM,YAAcR,EAAEG,MAAMC,SAASC,KAAK,2BACxCL,EAAE,wBAAwBM,YAAY,uBACtCE,YAAYD,SAAS,0BAGzBP,EAAE,iBAAiBS,WAAU,SAASC,OA3DfC,QA4DnBD,EAAEE,iBA5DiBD,QA6DL,IAAMR,KAAKU,KAAO,IA3DzBb,EAAE,wBAAwBc,MAAK,SAASC,OAEnCC,IAAKC,cADa,IAAfd,KAAKe,MAERC,OAAOC,cACPJ,IAAMG,OAAOC,gBACLC,YAAcL,IAAIM,cACtBL,MAAQD,IAAIK,WAAW,IACjBE,iBACNN,MAAMO,WAAYC,SAASC,eAAef,WAEvCc,SAASE,WAAaF,SAASE,UAAUC,cAChDH,SAASE,UAAUC,cAAcf,KAAOF,iBAGxCc,SAASE,eAEJE,SACLb,IAAMS,SAASE,UAAUC,eACrBf,KAAOF,aACNkB,aACF,GAAI1B,KAAK2B,gBAAyC,KAAvB3B,KAAK2B,eAAuB,KAEtDC,SAAW5B,KAAK2B,eAChBE,OAAS7B,KAAK8B,aACdC,UAAY/B,KAAK+B,eAChBhB,MAAQf,KAAKe,MAAMiB,UAAU,EAAGJ,UAAYpB,QAAUR,KAAKe,MAAMiB,UAAUH,OAAQ7B,KAAKe,MAAMkB,aAC9FP,aACAC,eAAiBC,SAAWpB,QAAQyB,YACpCH,aAAeF,SAAWpB,QAAQyB,YAClCF,UAAYA,oBAEZhB,OAASP,aACTkB,cA+BrB7B,EAAE,qBAAqBqC,OAAM,SAAS3B,GAClCA,EAAEE,iBACFZ,EAAE,cAAcsC,IAAI,GACpBtC,EAAE,eAAeuC,KAAK,YAAY,GAClCvC,EAAE,oBAAoBuC,KAAK,YAAY,GACvCvC,EAAE,iBAAiBuC,KAAK,YAAY,GACpCvC,EAAE,sBAAsBuC,KAAK,YAAY,GACzCvC,EAAE,eAAeuC,KAAK,YAAY,GAClCvC,EAAE,oBAAoBuC,KAAK,YAAY,GACvCvC,EAAE,oBAAoBuC,KAAK,YAAY,GACvCvC,EAAE,yBAAyBuC,KAAK,YAAY,GAC5CvC,EAAE,eAAeuC,KAAK,YAAY,GAClCvC,EAAE,mBAAmBuC,KAAK,YAAY,GACtCvC,EAAE,mBAAmBuC,KAAK,YAAY,GACtCvC,EAAE,wBAAwBuC,KAAK,YAAY,GAC3CvC,EAAE,YAAYuC,KAAK,YAAY,GAC/BvC,EAAE,YAAYuC,KAAK,YAAY"}