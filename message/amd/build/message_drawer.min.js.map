{"version":3,"file":"message_drawer.min.js","sources":["../src/message_drawer.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Controls the message drawer.\r\n *\r\n * @module     core_message/message_drawer\r\n * @copyright  2018 Ryan Wyllie <ryan@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(\r\n[\r\n    'jquery',\r\n    'core/custom_interaction_events',\r\n    'core/pubsub',\r\n    'core_message/message_drawer_view_contact',\r\n    'core_message/message_drawer_view_contacts',\r\n    'core_message/message_drawer_view_conversation',\r\n    'core_message/message_drawer_view_group_info',\r\n    'core_message/message_drawer_view_overview',\r\n    'core_message/message_drawer_view_search',\r\n    'core_message/message_drawer_view_settings',\r\n    'core_message/message_drawer_router',\r\n    'core_message/message_drawer_routes',\r\n    'core_message/message_drawer_events',\r\n    'core_message/message_drawer_helper',\r\n    'core/pending',\r\n    'core/drawer',\r\n],\r\nfunction(\r\n    $,\r\n    CustomEvents,\r\n    PubSub,\r\n    ViewContact,\r\n    ViewContacts,\r\n    ViewConversation,\r\n    ViewGroupInfo,\r\n    ViewOverview,\r\n    ViewSearch,\r\n    ViewSettings,\r\n    Router,\r\n    Routes,\r\n    Events,\r\n    Helper,\r\n    Pending,\r\n    Drawer\r\n) {\r\n\r\n    var SELECTORS = {\r\n        DRAWER: '[data-region=\"right-hand-drawer\"]',\r\n        JUMPTO: '.popover-region [data-region=\"jumpto\"]',\r\n        PANEL_BODY_CONTAINER: '[data-region=\"panel-body-container\"]',\r\n        PANEL_HEADER_CONTAINER: '[data-region=\"panel-header-container\"]',\r\n        VIEW_CONTACT: '[data-region=\"view-contact\"]',\r\n        VIEW_CONTACTS: '[data-region=\"view-contacts\"]',\r\n        VIEW_CONVERSATION: '[data-region=\"view-conversation\"]',\r\n        VIEW_GROUP_INFO: '[data-region=\"view-group-info\"]',\r\n        VIEW_OVERVIEW: '[data-region=\"view-overview\"]',\r\n        VIEW_SEARCH: '[data-region=\"view-search\"]',\r\n        VIEW_SETTINGS: '[data-region=\"view-settings\"]',\r\n        ROUTES: '[data-route]',\r\n        ROUTES_BACK: '[data-route-back]',\r\n        HEADER_CONTAINER: '[data-region=\"header-container\"]',\r\n        BODY_CONTAINER: '[data-region=\"body-container\"]',\r\n        FOOTER_CONTAINER: '[data-region=\"footer-container\"]',\r\n        CLOSE_BUTTON: '[data-action=\"closedrawer\"]'\r\n    };\r\n\r\n    /**\r\n     * Get elements for route.\r\n     *\r\n     * @param {String} namespace Unique identifier for the Routes\r\n     * @param {Object} root The message drawer container.\r\n     * @param {string} selector The route container.\r\n     *\r\n     * @return {array} elements Found route container objects.\r\n     */\r\n    var getParametersForRoute = function(namespace, root, selector) {\r\n\r\n        var header = root.find(SELECTORS.HEADER_CONTAINER).find(selector);\r\n        if (!header.length) {\r\n            header = root.find(SELECTORS.PANEL_HEADER_CONTAINER).find(selector);\r\n        }\r\n        var body = root.find(SELECTORS.BODY_CONTAINER).find(selector);\r\n        if (!body.length) {\r\n            body = root.find(SELECTORS.PANEL_BODY_CONTAINER).find(selector);\r\n        }\r\n        var footer = root.find(SELECTORS.FOOTER_CONTAINER).find(selector);\r\n\r\n        return [\r\n            namespace,\r\n            header.length ? header : null,\r\n            body.length ? body : null,\r\n            footer.length ? footer : null\r\n        ];\r\n    };\r\n\r\n    var routes = [\r\n        [Routes.VIEW_CONTACT, SELECTORS.VIEW_CONTACT, ViewContact.show, ViewContact.description],\r\n        [Routes.VIEW_CONTACTS, SELECTORS.VIEW_CONTACTS, ViewContacts.show, ViewContacts.description],\r\n        [Routes.VIEW_CONVERSATION, SELECTORS.VIEW_CONVERSATION, ViewConversation.show, ViewConversation.description],\r\n        [Routes.VIEW_GROUP_INFO, SELECTORS.VIEW_GROUP_INFO, ViewGroupInfo.show, ViewGroupInfo.description],\r\n        [Routes.VIEW_OVERVIEW, SELECTORS.VIEW_OVERVIEW, ViewOverview.show, ViewOverview.description],\r\n        [Routes.VIEW_SEARCH, SELECTORS.VIEW_SEARCH, ViewSearch.show, ViewSearch.description],\r\n        [Routes.VIEW_SETTINGS, SELECTORS.VIEW_SETTINGS, ViewSettings.show, ViewSettings.description]\r\n    ];\r\n\r\n    /**\r\n     * Create routes.\r\n     *\r\n     * @param {String} namespace Unique identifier for the Routes\r\n     * @param {Object} root The message drawer container.\r\n     */\r\n    var createRoutes = function(namespace, root) {\r\n        routes.forEach(function(route) {\r\n            Router.add(namespace, route[0], getParametersForRoute(namespace, root, route[1]), route[2], route[3]);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Show the message drawer.\r\n     *\r\n     * @param {string} namespace The route namespace.\r\n     * @param {Object} root The message drawer container.\r\n     */\r\n    var show = function(namespace, root) {\r\n        if (!root.attr('data-shown')) {\r\n            Router.go(namespace, Routes.VIEW_OVERVIEW);\r\n            root.attr('data-shown', true);\r\n        }\r\n\r\n        var drawerRoot = Drawer.getDrawerRoot(root);\r\n        if (drawerRoot.length) {\r\n            Drawer.show(drawerRoot);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Hide the message drawer.\r\n     *\r\n     * @param {Object} root The message drawer container.\r\n     */\r\n    var hide = function(root) {\r\n        var drawerRoot = Drawer.getDrawerRoot(root);\r\n        if (drawerRoot.length) {\r\n            Drawer.hide(drawerRoot);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if the drawer is visible.\r\n     *\r\n     * @param {Object} root The message drawer container.\r\n     * @return {boolean}\r\n     */\r\n    var isVisible = function(root) {\r\n        var drawerRoot = Drawer.getDrawerRoot(root);\r\n        if (drawerRoot.length) {\r\n            return Drawer.isVisible(drawerRoot);\r\n        }\r\n        return true;\r\n    };\r\n\r\n    /**\r\n     * Set Jump from button\r\n     *\r\n     * @param {String} buttonid The originating button id\r\n     */\r\n    var setJumpFrom = function(buttonid) {\r\n        $(SELECTORS.DRAWER).attr('data-origin', buttonid);\r\n    };\r\n\r\n    /**\r\n     * Listen to and handle events for routing, showing and hiding the message drawer.\r\n     *\r\n     * @param {string} namespace The route namespace.\r\n     * @param {Object} root The message drawer container.\r\n     * @param {bool} alwaysVisible Is this messaging app always shown?\r\n     */\r\n    var registerEventListeners = function(namespace, root, alwaysVisible) {\r\n        CustomEvents.define(root, [CustomEvents.events.activate]);\r\n        var paramRegex = /^data-route-param-?(\\d*)$/;\r\n\r\n        root.on(CustomEvents.events.activate, SELECTORS.ROUTES, function(e, data) {\r\n            var element = $(e.target).closest(SELECTORS.ROUTES);\r\n            var route = element.attr('data-route');\r\n            var attributes = [];\r\n\r\n            for (var i = 0; i < element[0].attributes.length; i++) {\r\n                attributes.push(element[0].attributes[i]);\r\n            }\r\n\r\n            var paramAttributes = attributes.filter(function(attribute) {\r\n                var name = attribute.nodeName;\r\n                var match = paramRegex.test(name);\r\n                return match;\r\n            });\r\n            paramAttributes.sort(function(a, b) {\r\n                var aParts = paramRegex.exec(a.nodeName);\r\n                var bParts = paramRegex.exec(b.nodeName);\r\n                var aIndex = aParts.length > 1 ? aParts[1] : 0;\r\n                var bIndex = bParts.length > 1 ? bParts[1] : 0;\r\n\r\n                if (aIndex < bIndex) {\r\n                    return -1;\r\n                } else if (bIndex < aIndex) {\r\n                    return 1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            });\r\n\r\n            var params = paramAttributes.map(function(attribute) {\r\n                return attribute.nodeValue;\r\n            });\r\n\r\n            var routeParams = [namespace, route].concat(params);\r\n\r\n            Router.go.apply(null, routeParams);\r\n\r\n            data.originalEvent.preventDefault();\r\n        });\r\n\r\n        root.on(CustomEvents.events.activate, SELECTORS.ROUTES_BACK, function(e, data) {\r\n            Router.back(namespace);\r\n\r\n            data.originalEvent.preventDefault();\r\n        });\r\n\r\n        // These are theme-specific to help us fix random behat fails.\r\n        // These events target those events defined in BS3 and BS4 onwards.\r\n        root.on('hide.bs.collapse', '.collapse', function(e) {\r\n            var pendingPromise = new Pending();\r\n            $(e.target).one('hidden.bs.collapse', function() {\r\n                pendingPromise.resolve();\r\n            });\r\n        });\r\n\r\n        root.on('show.bs.collapse', '.collapse', function(e) {\r\n            var pendingPromise = new Pending();\r\n            $(e.target).one('shown.bs.collapse', function() {\r\n                pendingPromise.resolve();\r\n            });\r\n        });\r\n\r\n        $(SELECTORS.JUMPTO).focus(function() {\r\n            var firstInput = root.find(SELECTORS.CLOSE_BUTTON);\r\n            if (firstInput.length) {\r\n                firstInput.focus();\r\n            } else {\r\n                $(SELECTORS.HEADER_CONTAINER).find(SELECTORS.ROUTES_BACK).focus();\r\n            }\r\n        });\r\n\r\n        $(SELECTORS.DRAWER).focus(function() {\r\n            var button = $(this).attr('data-origin');\r\n            if (button) {\r\n                $('#' + button).focus();\r\n            }\r\n        });\r\n\r\n        if (!alwaysVisible) {\r\n            PubSub.subscribe(Events.SHOW, function() {\r\n                show(namespace, root);\r\n            });\r\n\r\n            PubSub.subscribe(Events.HIDE, function() {\r\n                hide(root);\r\n            });\r\n\r\n            PubSub.subscribe(Events.TOGGLE_VISIBILITY, function(buttonid) {\r\n                if (isVisible(root)) {\r\n                    hide(root);\r\n                    $(SELECTORS.JUMPTO).attr('tabindex', -1);\r\n                } else {\r\n                    show(namespace, root);\r\n                    setJumpFrom(buttonid);\r\n                    $(SELECTORS.JUMPTO).attr('tabindex', 0);\r\n                }\r\n            });\r\n        }\r\n\r\n        PubSub.subscribe(Events.SHOW_CONVERSATION, function(args) {\r\n            setJumpFrom(args.buttonid);\r\n            show(namespace, root);\r\n            Router.go(namespace, Routes.VIEW_CONVERSATION, args.conversationid);\r\n        });\r\n\r\n        var closebutton = root.find(SELECTORS.CLOSE_BUTTON);\r\n        closebutton.on(CustomEvents.events.activate, function(e, data) {\r\n            data.originalEvent.preventDefault();\r\n\r\n            var button = $(SELECTORS.DRAWER).attr('data-origin');\r\n            if (button) {\r\n                $('#' + button).focus();\r\n            }\r\n            PubSub.publish(Events.TOGGLE_VISIBILITY);\r\n        });\r\n\r\n        PubSub.subscribe(Events.CREATE_CONVERSATION_WITH_USER, function(args) {\r\n            setJumpFrom(args.buttonid);\r\n            show(namespace, root);\r\n            Router.go(namespace, Routes.VIEW_CONVERSATION, null, 'create', args.userid);\r\n        });\r\n\r\n        PubSub.subscribe(Events.SHOW_SETTINGS, function() {\r\n            show(namespace, root);\r\n            Router.go(namespace, Routes.VIEW_SETTINGS);\r\n        });\r\n\r\n        PubSub.subscribe(Events.PREFERENCES_UPDATED, function(preferences) {\r\n            var filteredPreferences = preferences.filter(function(preference) {\r\n                return preference.type == 'message_entertosend';\r\n            });\r\n            var enterToSendPreference = filteredPreferences.length ? filteredPreferences[0] : null;\r\n\r\n            if (enterToSendPreference) {\r\n                var viewConversationFooter = root.find(SELECTORS.FOOTER_CONTAINER).find(SELECTORS.VIEW_CONVERSATION);\r\n                viewConversationFooter.attr('data-enter-to-send', enterToSendPreference.value);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Initialise the message drawer.\r\n     *\r\n     * @param {Object} root The message drawer container.\r\n     * @param {String} uniqueId Unique identifier for the Routes\r\n     * @param {bool} alwaysVisible Should we show the app now, or wait for the user?\r\n     * @param {Object} route\r\n     */\r\n    var init = function(root, uniqueId, alwaysVisible, route) {\r\n        root = $(root);\r\n        createRoutes(uniqueId, root);\r\n        registerEventListeners(uniqueId, root, alwaysVisible);\r\n\r\n        if (alwaysVisible) {\r\n            show(uniqueId, root);\r\n\r\n            if (route) {\r\n                var routeParams = route.params || [];\r\n                routeParams = [uniqueId, route.path].concat(routeParams);\r\n                Router.go.apply(null, routeParams);\r\n            }\r\n        }\r\n\r\n        // Mark the drawer as ready.\r\n        Helper.markDrawerReady();\r\n    };\r\n\r\n    return {\r\n        init: init,\r\n    };\r\n});\r\n"],"names":["define","$","CustomEvents","PubSub","ViewContact","ViewContacts","ViewConversation","ViewGroupInfo","ViewOverview","ViewSearch","ViewSettings","Router","Routes","Events","Helper","Pending","Drawer","SELECTORS","routes","VIEW_CONTACT","show","description","VIEW_CONTACTS","VIEW_CONVERSATION","VIEW_GROUP_INFO","VIEW_OVERVIEW","VIEW_SEARCH","VIEW_SETTINGS","createRoutes","namespace","root","forEach","route","add","selector","header","find","length","body","footer","getParametersForRoute","attr","go","drawerRoot","getDrawerRoot","hide","setJumpFrom","buttonid","registerEventListeners","alwaysVisible","events","activate","paramRegex","on","e","data","element","target","closest","attributes","i","push","paramAttributes","filter","attribute","name","nodeName","test","sort","a","b","aParts","exec","bParts","aIndex","bIndex","params","map","nodeValue","routeParams","concat","apply","originalEvent","preventDefault","back","pendingPromise","one","resolve","focus","firstInput","button","this","subscribe","SHOW","HIDE","TOGGLE_VISIBILITY","isVisible","SHOW_CONVERSATION","args","conversationid","publish","CREATE_CONVERSATION_WITH_USER","userid","SHOW_SETTINGS","PREFERENCES_UPDATED","preferences","filteredPreferences","preference","type","enterToSendPreference","value","init","uniqueId","path","markDrawerReady"],"mappings":";;;;;;;AAsBAA,qCACA,CACI,SACA,iCACA,cACA,2CACA,4CACA,gDACA,8CACA,4CACA,0CACA,4CACA,qCACA,qCACA,qCACA,qCACA,eACA,gBAEJ,SACIC,EACAC,aACAC,OACAC,YACAC,aACAC,iBACAC,cACAC,aACAC,WACAC,aACAC,OACAC,OACAC,OACAC,OACAC,QACAC,YAGIC,iBACQ,oCADRA,iBAEQ,yCAFRA,+BAGsB,uCAHtBA,iCAIwB,yCAJxBA,uBAKc,+BALdA,wBAMe,gCANfA,4BAOmB,oCAPnBA,0BAQiB,kCARjBA,wBASe,gCATfA,sBAUa,8BAVbA,wBAWe,gCAXfA,iBAYQ,eAZRA,sBAaa,oBAbbA,2BAckB,mCAdlBA,yBAegB,iCAfhBA,2BAgBkB,mCAhBlBA,uBAiBc,8BAgCdC,OAAS,CACT,CAACN,OAAOO,aAAcF,uBAAwBb,YAAYgB,KAAMhB,YAAYiB,aAC5E,CAACT,OAAOU,cAAeL,wBAAyBZ,aAAae,KAAMf,aAAagB,aAChF,CAACT,OAAOW,kBAAmBN,4BAA6BX,iBAAiBc,KAAMd,iBAAiBe,aAChG,CAACT,OAAOY,gBAAiBP,0BAA2BV,cAAca,KAAMb,cAAcc,aACtF,CAACT,OAAOa,cAAeR,wBAAyBT,aAAaY,KAAMZ,aAAaa,aAChF,CAACT,OAAOc,YAAaT,sBAAuBR,WAAWW,KAAMX,WAAWY,aACxE,CAACT,OAAOe,cAAeV,wBAAyBP,aAAaU,KAAMV,aAAaW,cAShFO,aAAe,SAASC,UAAWC,MACnCZ,OAAOa,SAAQ,SAASC,OACpBrB,OAAOsB,IAAIJ,UAAWG,MAAM,GAtCR,SAASH,UAAWC,KAAMI,cAE9CC,OAASL,KAAKM,KAAKnB,4BAA4BmB,KAAKF,UACnDC,OAAOE,SACRF,OAASL,KAAKM,KAAKnB,kCAAkCmB,KAAKF,eAE1DI,KAAOR,KAAKM,KAAKnB,0BAA0BmB,KAAKF,UAC/CI,KAAKD,SACNC,KAAOR,KAAKM,KAAKnB,gCAAgCmB,KAAKF,eAEtDK,OAAST,KAAKM,KAAKnB,4BAA4BmB,KAAKF,gBAEjD,CACHL,UACAM,OAAOE,OAASF,OAAS,KACzBG,KAAKD,OAASC,KAAO,KACrBC,OAAOF,OAASE,OAAS,MAsBOC,CAAsBX,UAAWC,KAAME,MAAM,IAAKA,MAAM,GAAIA,MAAM,QAUtGZ,KAAO,SAASS,UAAWC,MACtBA,KAAKW,KAAK,gBACX9B,OAAO+B,GAAGb,UAAWjB,OAAOa,eAC5BK,KAAKW,KAAK,cAAc,QAGxBE,WAAa3B,OAAO4B,cAAcd,MAClCa,WAAWN,QACXrB,OAAOI,KAAKuB,aAShBE,KAAO,SAASf,UACZa,WAAa3B,OAAO4B,cAAcd,MAClCa,WAAWN,QACXrB,OAAO6B,KAAKF,aAuBhBG,YAAc,SAASC,UACvB9C,EAAEgB,kBAAkBwB,KAAK,cAAeM,WAUxCC,uBAAyB,SAASnB,UAAWC,KAAMmB,eACnD/C,aAAaF,OAAO8B,KAAM,CAAC5B,aAAagD,OAAOC,eAC3CC,WAAa,4BAEjBtB,KAAKuB,GAAGnD,aAAagD,OAAOC,SAAUlC,kBAAkB,SAASqC,EAAGC,cAC5DC,QAAUvD,EAAEqD,EAAEG,QAAQC,QAAQzC,kBAC9Be,MAAQwB,QAAQf,KAAK,cACrBkB,WAAa,GAERC,EAAI,EAAGA,EAAIJ,QAAQ,GAAGG,WAAWtB,OAAQuB,IAC9CD,WAAWE,KAAKL,QAAQ,GAAGG,WAAWC,QAGtCE,gBAAkBH,WAAWI,QAAO,SAASC,eACzCC,KAAOD,UAAUE,gBACTd,WAAWe,KAAKF,SAGhCH,gBAAgBM,MAAK,SAASC,EAAGC,OACzBC,OAASnB,WAAWoB,KAAKH,EAAEH,UAC3BO,OAASrB,WAAWoB,KAAKF,EAAEJ,UAC3BQ,OAASH,OAAOlC,OAAS,EAAIkC,OAAO,GAAK,EACzCI,OAASF,OAAOpC,OAAS,EAAIoC,OAAO,GAAK,SAEzCC,OAASC,QACD,EACDA,OAASD,OACT,EAEA,SAIXE,OAASd,gBAAgBe,KAAI,SAASb,kBAC/BA,UAAUc,aAGjBC,YAAc,CAAClD,UAAWG,OAAOgD,OAAOJ,QAE5CjE,OAAO+B,GAAGuC,MAAM,KAAMF,aAEtBxB,KAAK2B,cAAcC,oBAGvBrD,KAAKuB,GAAGnD,aAAagD,OAAOC,SAAUlC,uBAAuB,SAASqC,EAAGC,MACrE5C,OAAOyE,KAAKvD,WAEZ0B,KAAK2B,cAAcC,oBAKvBrD,KAAKuB,GAAG,mBAAoB,aAAa,SAASC,OAC1C+B,eAAiB,IAAItE,QACzBd,EAAEqD,EAAEG,QAAQ6B,IAAI,sBAAsB,WAClCD,eAAeE,gBAIvBzD,KAAKuB,GAAG,mBAAoB,aAAa,SAASC,OAC1C+B,eAAiB,IAAItE,QACzBd,EAAEqD,EAAEG,QAAQ6B,IAAI,qBAAqB,WACjCD,eAAeE,gBAIvBtF,EAAEgB,kBAAkBuE,OAAM,eAClBC,WAAa3D,KAAKM,KAAKnB,wBACvBwE,WAAWpD,OACXoD,WAAWD,QAEXvF,EAAEgB,4BAA4BmB,KAAKnB,uBAAuBuE,WAIlEvF,EAAEgB,kBAAkBuE,OAAM,eAClBE,OAASzF,EAAE0F,MAAMlD,KAAK,eACtBiD,QACAzF,EAAE,IAAMyF,QAAQF,WAInBvC,gBACD9C,OAAOyF,UAAU/E,OAAOgF,MAAM,WAC1BzE,KAAKS,UAAWC,SAGpB3B,OAAOyF,UAAU/E,OAAOiF,MAAM,WAC1BjD,KAAKf,SAGT3B,OAAOyF,UAAU/E,OAAOkF,mBAAmB,SAAShD,WAnH5C,SAASjB,UACjBa,WAAa3B,OAAO4B,cAAcd,aAClCa,WAAWN,QACJrB,OAAOgF,UAAUrD,YAiHhBqD,CAAUlE,OAIVV,KAAKS,UAAWC,MAChBgB,YAAYC,UACZ9C,EAAEgB,kBAAkBwB,KAAK,WAAY,KALrCI,KAAKf,MACL7B,EAAEgB,kBAAkBwB,KAAK,YAAa,QASlDtC,OAAOyF,UAAU/E,OAAOoF,mBAAmB,SAASC,MAChDpD,YAAYoD,KAAKnD,UACjB3B,KAAKS,UAAWC,MAChBnB,OAAO+B,GAAGb,UAAWjB,OAAOW,kBAAmB2E,KAAKC,mBAGtCrE,KAAKM,KAAKnB,wBAChBoC,GAAGnD,aAAagD,OAAOC,UAAU,SAASG,EAAGC,MACrDA,KAAK2B,cAAcC,qBAEfO,OAASzF,EAAEgB,kBAAkBwB,KAAK,eAClCiD,QACAzF,EAAE,IAAMyF,QAAQF,QAEpBrF,OAAOiG,QAAQvF,OAAOkF,sBAG1B5F,OAAOyF,UAAU/E,OAAOwF,+BAA+B,SAASH,MAC5DpD,YAAYoD,KAAKnD,UACjB3B,KAAKS,UAAWC,MAChBnB,OAAO+B,GAAGb,UAAWjB,OAAOW,kBAAmB,KAAM,SAAU2E,KAAKI,WAGxEnG,OAAOyF,UAAU/E,OAAO0F,eAAe,WACnCnF,KAAKS,UAAWC,MAChBnB,OAAO+B,GAAGb,UAAWjB,OAAOe,kBAGhCxB,OAAOyF,UAAU/E,OAAO2F,qBAAqB,SAASC,iBAC9CC,oBAAsBD,YAAY1C,QAAO,SAAS4C,kBACxB,uBAAnBA,WAAWC,QAElBC,sBAAwBH,oBAAoBrE,OAASqE,oBAAoB,GAAK,KAE9EG,uBAC6B/E,KAAKM,KAAKnB,4BAA4BmB,KAAKnB,6BACjDwB,KAAK,qBAAsBoE,sBAAsBC,iBAgC7E,CACHC,KApBO,SAASjF,KAAMkF,SAAU/D,cAAejB,UAC/CF,KAAO7B,EAAE6B,MACTF,aAAaoF,SAAUlF,MACvBkB,uBAAuBgE,SAAUlF,KAAMmB,eAEnCA,gBACA7B,KAAK4F,SAAUlF,MAEXE,OAAO,KACH+C,YAAc/C,MAAM4C,QAAU,GAClCG,YAAc,CAACiC,SAAUhF,MAAMiF,MAAMjC,OAAOD,aAC5CpE,OAAO+B,GAAGuC,MAAM,KAAMF,aAK9BjE,OAAOoG"}