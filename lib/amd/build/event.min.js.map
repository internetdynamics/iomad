{"version":3,"file":"event.min.js","sources":["../src/event.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Global registry of core events that can be triggered/listened for.\r\n *\r\n * @module     core/event\r\n * @copyright  2015 Damyon Wiese <damyon@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @since      3.0\r\n */\r\n\r\nimport {notifyEditorContentRestored} from 'core_editor/events';\r\nimport {notifyFilterContentUpdated} from 'core_filters/events';\r\nimport {notifyFormSubmittedByJavascript} from 'core_form/events';\r\n\r\n// These are only imported for legacy.\r\nimport $ from 'jquery';\r\nimport Y from 'core/yui';\r\n\r\n// These are AMD only events - no backwards compatibility for new things.\r\n// Note: No new events should be created here.\r\nconst Events = {\r\n    FORM_FIELD_VALIDATION: \"core_form-field-validation\"\r\n};\r\n\r\n/**\r\n * Load the legacy YUI module which defines events in M.core.event and return it.\r\n *\r\n * @method getLegacyEvents\r\n * @return {Promise}\r\n * @deprecated\r\n */\r\nconst getLegacyEvents = () => {\r\n    const result = $.Deferred();\r\n    window.console.warn(\"The getLegacyEvents function has been deprecated. Please update your code to use native events.\");\r\n\r\n    Y.use('event', 'moodle-core-event', function() {\r\n        result.resolve(window.M.core.event);\r\n    });\r\n    return result.promise();\r\n};\r\n\r\n/**\r\n * Get a curried function to warn that a function has been moved and renamed\r\n *\r\n * @param   {String} oldFunctionName\r\n * @param   {String} newModule\r\n * @param   {String} newFunctionName\r\n * @param   {Function} newFunctionRef\r\n * @returns {Function}\r\n */\r\nconst getRenamedLegacyFunction = (oldFunctionName, newModule, newFunctionName, newFunctionRef) => (...args) => {\r\n    window.console.warn(\r\n        `The core/event::${oldFunctionName}() function has been moved to ${newModule}::${newFunctionName}. ` +\r\n        `Please update your code to use the new module.`\r\n    );\r\n\r\n    return newFunctionRef(...args);\r\n};\r\n\r\nexport default {\r\n    Events,\r\n    getLegacyEvents,\r\n\r\n    notifyEditorContentRestored: getRenamedLegacyFunction(\r\n        'notifyEditorContentRestored',\r\n        'core_editor/events',\r\n        'notifyEditorContentRestored',\r\n        notifyEditorContentRestored\r\n    ),\r\n\r\n    notifyFilterContentUpdated: getRenamedLegacyFunction(\r\n        'notifyFilterContentUpdated',\r\n        'core_filters/events',\r\n        'notifyFilterContentUpdated',\r\n        notifyFilterContentUpdated\r\n    ),\r\n\r\n    notifyFormSubmitAjax: getRenamedLegacyFunction(\r\n        'notifyFormSubmitAjax',\r\n        'core_form/events',\r\n        'notifyFormSubmittedByJavascript',\r\n        notifyFormSubmittedByJavascript\r\n    ),\r\n};\r\n"],"names":["getRenamedLegacyFunction","oldFunctionName","newModule","newFunctionName","newFunctionRef","window","console","warn","Events","FORM_FIELD_VALIDATION","getLegacyEvents","result","$","Deferred","use","resolve","M","core","event","promise","notifyEditorContentRestored","notifyFilterContentUpdated","notifyFormSubmitAjax","notifyFormSubmittedByJavascript"],"mappings":";;;;;;;;qKAgEMA,yBAA2B,CAACC,gBAAiBC,UAAWC,gBAAiBC,iBAAmB,kBAC9FC,OAAOC,QAAQC,KACX,0BAAmBN,yDAAgDC,uBAAcC,wEAI9EC,2CAGI,CACXI,OAxCW,CACXC,sBAAuB,8BAwCvBC,gBA9BoB,WACdC,OAASC,gBAAEC,kBACjBR,OAAOC,QAAQC,KAAK,gHAElBO,IAAI,QAAS,qBAAqB,WAChCH,OAAOI,QAAQV,OAAOW,EAAEC,KAAKC,UAE1BP,OAAOQ,WAyBdC,4BAA6BpB,yBACzB,8BACA,qBACA,8BACAoB,qCAGJC,2BAA4BrB,yBACxB,6BACA,sBACA,6BACAqB,qCAGJC,qBAAsBtB,yBAClB,uBACA,mBACA,kCACAuB"}