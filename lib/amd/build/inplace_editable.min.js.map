{"version":3,"file":"inplace_editable.min.js","sources":["../src/inplace_editable.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * AJAX helper for the inline editing a value.\r\n *\r\n * This script is automatically included from template core/inplace_editable\r\n * It registers a click-listener on [data-inplaceeditablelink] link (the \"inplace edit\" icon),\r\n * then replaces the displayed value with an input field. On \"Enter\" it sends a request\r\n * to web service core_update_inplace_editable, which invokes the specified callback.\r\n * Any exception thrown by the web service (or callback) is displayed as an error popup.\r\n *\r\n * @module     core/inplace_editable\r\n * @copyright  2016 Marina Glancy\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @since      3.1\r\n */\r\ndefine(\r\n    ['jquery',\r\n        'core/ajax',\r\n        'core/templates',\r\n        'core/notification',\r\n        'core/str',\r\n        'core/config',\r\n        'core/url',\r\n        'core/form-autocomplete',\r\n        'core/pending',\r\n        'core/local/inplace_editable/events',\r\n    ],\r\n    function($, ajax, templates, notification, str, cfg, url, autocomplete, Pending, Events) {\r\n\r\n        const removeSpinner = function(element) {\r\n            element.removeClass('updating');\r\n            element.find('img.spinner').hide();\r\n        };\r\n\r\n        /**\r\n         * Update an inplace editable value.\r\n         *\r\n         * @param {Jquery} mainelement the element to update\r\n         * @param {string} value the new value\r\n         * @param {bool} silent if true the change won't alter the current page focus\r\n         * @fires event:core/inplace_editable:updated\r\n         * @fires event:core/inplace_editable:updateFailed\r\n         */\r\n        const updateValue = function(mainelement, value, silent) {\r\n            var pendingId = [\r\n                mainelement.attr('data-itemid'),\r\n                mainelement.attr('data-component'),\r\n                mainelement.attr('data-itemtype'),\r\n            ].join('-');\r\n            var pendingPromise = new Pending(pendingId);\r\n\r\n            addSpinner(mainelement);\r\n            ajax.call([{\r\n                methodname: 'core_update_inplace_editable',\r\n                args: {\r\n                    itemid: mainelement.attr('data-itemid'),\r\n                    component: mainelement.attr('data-component'),\r\n                    itemtype: mainelement.attr('data-itemtype'),\r\n                    value: value,\r\n                },\r\n            }])[0]\r\n                .then(function(data) {\r\n                    return templates.render('core/inplace_editable', data)\r\n                        .then(function(html, js) {\r\n                            var oldvalue = mainelement.attr('data-value');\r\n                            var newelement = $(html);\r\n                            templates.replaceNode(mainelement, newelement, js);\r\n                            if (!silent) {\r\n                                newelement.find('[data-inplaceeditablelink]').focus();\r\n                            }\r\n\r\n                            // Trigger updated event on the DOM element.\r\n                            Events.notifyElementUpdated(newelement.get(0), data, oldvalue);\r\n\r\n                            return;\r\n                        });\r\n                })\r\n                .then(function() {\r\n                    return pendingPromise.resolve();\r\n                })\r\n                .fail(function(ex) {\r\n                    removeSpinner(mainelement);\r\n                    M.util.js_complete(pendingId);\r\n\r\n                    // Trigger update failed event on the DOM element.\r\n                    let updateFailedEvent = Events.notifyElementUpdateFailed(mainelement.get(0), ex, value);\r\n                    if (!updateFailedEvent.defaultPrevented) {\r\n                        notification.exception(ex);\r\n                    }\r\n                });\r\n        };\r\n\r\n        const addSpinner = function(element) {\r\n            element.addClass('updating');\r\n            var spinner = element.find('img.spinner');\r\n            if (spinner.length) {\r\n                spinner.show();\r\n            } else {\r\n                spinner = $('<img/>')\r\n                    .attr('src', url.imageUrl('i/loading_small'))\r\n                    .addClass('spinner').addClass('smallicon')\r\n                    ;\r\n                element.append(spinner);\r\n            }\r\n        };\r\n\r\n        $('body').on('click keypress', '[data-inplaceeditable] [data-inplaceeditablelink]', function(e) {\r\n            if (e.type === 'keypress' && e.keyCode !== 13) {\r\n                return;\r\n            }\r\n            var editingEnabledPromise = new Pending('autocomplete-start-editing');\r\n            e.stopImmediatePropagation();\r\n            e.preventDefault();\r\n            var target = $(this),\r\n                mainelement = target.closest('[data-inplaceeditable]');\r\n\r\n            var turnEditingOff = function(el) {\r\n                el.find('input').off();\r\n                el.find('select').off();\r\n                el.html(el.attr('data-oldcontent'));\r\n                el.removeAttr('data-oldcontent');\r\n                el.removeClass('inplaceeditingon');\r\n                el.find('[data-inplaceeditablelink]').focus();\r\n\r\n                // Re-enable any parent draggable attribute.\r\n                el.parents(`[data-inplace-in-draggable=\"true\"]`)\r\n                    .attr('draggable', true)\r\n                    .attr('data-inplace-in-draggable', false);\r\n            };\r\n\r\n            var turnEditingOffEverywhere = function() {\r\n                // Re-enable any disabled draggable attribute.\r\n                $(`[data-inplace-in-draggable=\"true\"]`)\r\n                    .attr('draggable', true)\r\n                    .attr('data-inplace-in-draggable', false);\r\n\r\n                $('span.inplaceeditable.inplaceeditingon').each(function() {\r\n                    turnEditingOff($(this));\r\n                });\r\n            };\r\n\r\n            var uniqueId = function(prefix, idlength) {\r\n                var uniqid = prefix,\r\n                    i;\r\n                for (i = 0; i < idlength; i++) {\r\n                    uniqid += String(Math.floor(Math.random() * 10));\r\n                }\r\n                // Make sure this ID is not already taken by an existing element.\r\n                if ($(\"#\" + uniqid).length === 0) {\r\n                    return uniqid;\r\n                }\r\n                return uniqueId(prefix, idlength);\r\n            };\r\n\r\n            var turnEditingOnText = function(el) {\r\n                str.get_string('edittitleinstructions').done(function(s) {\r\n                    var instr = $('<span class=\"editinstructions\">' + s + '</span>').\r\n                        attr('id', uniqueId('id_editinstructions_', 20)),\r\n                        inputelement = $('<input type=\"text\"/>').\r\n                            attr('id', uniqueId('id_inplacevalue_', 20)).\r\n                            attr('value', el.attr('data-value')).\r\n                            attr('aria-describedby', instr.attr('id')).\r\n                            addClass('ignoredirty').\r\n                            addClass('form-control'),\r\n                        lbl = $('<label class=\"accesshide\">' + mainelement.attr('data-editlabel') + '</label>').\r\n                            attr('for', inputelement.attr('id'));\r\n                    el.html('').append(instr).append(lbl).append(inputelement);\r\n\r\n                    inputelement.focus();\r\n                    inputelement.select();\r\n                    inputelement.on('keyup keypress focusout', function(e) {\r\n                        if (cfg.behatsiterunning && e.type === 'focusout') {\r\n                            // Behat triggers focusout too often.\r\n                            return;\r\n                        }\r\n                        if (e.type === 'keypress' && e.keyCode === 13) {\r\n                            // We need 'keypress' event for Enter because keyup/keydown would catch Enter that was\r\n                            // pressed in other fields.\r\n                            var val = inputelement.val();\r\n                            turnEditingOff(el);\r\n                            updateValue(el, val);\r\n                        }\r\n                        if ((e.type === 'keyup' && e.keyCode === 27) || e.type === 'focusout') {\r\n                            // We need 'keyup' event for Escape because keypress does not work with Escape.\r\n                            turnEditingOff(el);\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n\r\n            var turnEditingOnToggle = function(el, newvalue) {\r\n                turnEditingOff(el);\r\n                updateValue(el, newvalue);\r\n            };\r\n\r\n            var turnEditingOnSelect = function(el, options) {\r\n                var i,\r\n                    inputelement = $('<select></select>').\r\n                        attr('id', uniqueId('id_inplacevalue_', 20)).\r\n                        addClass('custom-select'),\r\n                    lbl = $('<label class=\"accesshide\">' + mainelement.attr('data-editlabel') + '</label>')\r\n                        .attr('for', inputelement.attr('id'));\r\n                for (i in options) {\r\n                    inputelement\r\n                        .append($('<option>')\r\n                            .attr('value', options[i].key)\r\n                            .html(options[i].value));\r\n                }\r\n                inputelement.val(el.attr('data-value'));\r\n\r\n                el.html('')\r\n                    .append(lbl)\r\n                    .append(inputelement);\r\n\r\n                inputelement.focus();\r\n                inputelement.select();\r\n                inputelement.on('keyup change focusout', function(e) {\r\n                    if (cfg.behatsiterunning && e.type === 'focusout') {\r\n                        // Behat triggers focusout too often.\r\n                        return;\r\n                    }\r\n                    if (e.type === 'change') {\r\n                        var val = inputelement.val();\r\n                        turnEditingOff(el);\r\n                        updateValue(el, val);\r\n                    }\r\n                    if ((e.type === 'keyup' && e.keyCode === 27) || e.type === 'focusout') {\r\n                        // We need 'keyup' event for Escape because keypress does not work with Escape.\r\n                        turnEditingOff(el);\r\n                    }\r\n                });\r\n            };\r\n\r\n            var turnEditingOnAutocomplete = function(el, args) {\r\n                var i,\r\n                    inputelement = $('<select></select>').\r\n                        attr('id', uniqueId('id_inplacevalue_', 20)).\r\n                        addClass('form-autocomplete-original-select').\r\n                        addClass('custom-select'),\r\n                    lbl = $('<label class=\"accesshide\">' + mainelement.attr('data-editlabel') + '</label>')\r\n                        .attr('for', inputelement.attr('id')),\r\n                    options = args.options,\r\n                    attributes = args.attributes,\r\n                    saveelement = $('<a href=\"#\"></a>'),\r\n                    cancelelement = $('<a href=\"#\"></a>');\r\n\r\n                for (i in options) {\r\n                    inputelement\r\n                        .append($('<option>')\r\n                            .attr('value', options[i].key)\r\n                            .html(options[i].value));\r\n                }\r\n                if (attributes.multiple) {\r\n                    inputelement.attr('multiple', 'true');\r\n                }\r\n                inputelement.val(JSON.parse(el.attr('data-value')));\r\n\r\n                str.get_string('savechanges', 'core').then(function(s) {\r\n                    return templates.renderPix('e/save', 'core', s);\r\n                }).then(function(html) {\r\n                    saveelement.append(html);\r\n                    return;\r\n                }).fail(notification.exception);\r\n\r\n                str.get_string('cancel', 'core').then(function(s) {\r\n                    return templates.renderPix('e/cancel', 'core', s);\r\n                }).then(function(html) {\r\n                    cancelelement.append(html);\r\n                    return;\r\n                }).fail(notification.exception);\r\n\r\n                el.html('')\r\n                    .append(lbl)\r\n                    .append(inputelement)\r\n                    .append(saveelement)\r\n                    .append(cancelelement);\r\n\r\n                inputelement.focus();\r\n                inputelement.select();\r\n                autocomplete.enhance(inputelement,\r\n                    attributes.tags,\r\n                    attributes.ajax,\r\n                    attributes.placeholder,\r\n                    attributes.caseSensitive,\r\n                    attributes.showSuggestions,\r\n                    attributes.noSelectionString)\r\n                    .then(function() {\r\n                        // Focus on the enhanced combobox.\r\n                        el.find('[role=combobox]').focus();\r\n                        // Stop eslint nagging.\r\n                        return;\r\n                    }).fail(notification.exception);\r\n\r\n                inputelement.on('keyup', function(e) {\r\n                    if ((e.type === 'keyup' && e.keyCode === 27) || e.type === 'focusout') {\r\n                        // We need 'keyup' event for Escape because keypress does not work with Escape.\r\n                        turnEditingOff(el);\r\n                    }\r\n                });\r\n                saveelement.on('click', function(e) {\r\n                    var val = JSON.stringify(inputelement.val());\r\n                    // We need to empty the node to destroy all event handlers etc.\r\n                    inputelement.empty();\r\n                    turnEditingOff(el);\r\n                    updateValue(el, val);\r\n                    e.preventDefault();\r\n                });\r\n                cancelelement.on('click', function(e) {\r\n                    // We need to empty the node to destroy all event handlers etc.\r\n                    inputelement.empty();\r\n                    turnEditingOff(el);\r\n                    e.preventDefault();\r\n                });\r\n            };\r\n\r\n            var turnEditingOn = function(el) {\r\n                el.addClass('inplaceeditingon');\r\n                el.attr('data-oldcontent', el.html());\r\n\r\n                var type = el.attr('data-type');\r\n                var options = el.attr('data-options');\r\n\r\n                // Input text inside draggable elements disable text selection in some browsers.\r\n                // To prevent this we temporally disable any parent draggables.\r\n                el.parents('[draggable=\"true\"]')\r\n                    .attr('data-inplace-in-draggable', true)\r\n                    .attr('draggable', false);\r\n\r\n                if (type === 'toggle') {\r\n                    turnEditingOnToggle(el, options);\r\n                } else if (type === 'select') {\r\n                    turnEditingOnSelect(el, $.parseJSON(options));\r\n                } else if (type === 'autocomplete') {\r\n                    turnEditingOnAutocomplete(el, $.parseJSON(options));\r\n                } else {\r\n                    turnEditingOnText(el);\r\n                }\r\n            };\r\n\r\n            // Turn editing on for the current element and register handler for Enter/Esc keys.\r\n            turnEditingOffEverywhere();\r\n            turnEditingOn(mainelement);\r\n            editingEnabledPromise.resolve();\r\n\r\n        });\r\n\r\n\r\n        return {\r\n            /**\r\n             * Return an object to interact with the current inplace editables at a frontend level.\r\n             *\r\n             * @param {Element} parent the parent element containing a inplace editable\r\n             * @returns {Object|undefined} an object to interact with the inplace element, or undefined\r\n             *                             if no inplace editable is found.\r\n             */\r\n            getInplaceEditable: function(parent) {\r\n                const element = parent.querySelector(`[data-inplaceeditable]`);\r\n                if (!element) {\r\n                    return undefined;\r\n                }\r\n                // Return an object to interact with the inplace editable.\r\n                return {\r\n                    element,\r\n                    /**\r\n                     * Get the value from the inplace editable.\r\n                     *\r\n                     * @returns {string} the current inplace value\r\n                     */\r\n                    getValue: function() {\r\n                        return this.element.dataset.value;\r\n                    },\r\n                    /**\r\n                     * Force a value change.\r\n                     *\r\n                     * @param {string} newvalue the new value\r\n                     * @fires event:core/inplace_editable:updated\r\n                     * @fires event:core/inplace_editable:updateFailed\r\n                     */\r\n                    setValue: function(newvalue) {\r\n                        updateValue($(this.element), newvalue, true);\r\n                    },\r\n                    /**\r\n                     * Return the inplace editable itemid.\r\n                     *\r\n                     * @returns {string} the current itemid\r\n                     */\r\n                    getItemId: function() {\r\n                        return this.element.dataset.itemid;\r\n                    },\r\n                };\r\n            }\r\n        };\r\n    });\r\n"],"names":["define","$","ajax","templates","notification","str","cfg","url","autocomplete","Pending","Events","updateValue","mainelement","value","silent","pendingId","attr","join","pendingPromise","addSpinner","call","methodname","args","itemid","component","itemtype","then","data","render","html","js","oldvalue","newelement","replaceNode","find","focus","notifyElementUpdated","get","resolve","fail","ex","element","removeClass","hide","M","util","js_complete","notifyElementUpdateFailed","defaultPrevented","exception","addClass","spinner","length","show","imageUrl","append","on","e","type","keyCode","editingEnabledPromise","stopImmediatePropagation","preventDefault","this","closest","turnEditingOff","el","off","removeAttr","parents","uniqueId","prefix","idlength","i","uniqid","String","Math","floor","random","each","options","newvalue","turnEditingOnToggle","inputelement","lbl","key","val","select","behatsiterunning","turnEditingOnSelect","parseJSON","attributes","saveelement","cancelelement","multiple","JSON","parse","get_string","s","renderPix","enhance","tags","placeholder","caseSensitive","showSuggestions","noSelectionString","stringify","empty","turnEditingOnAutocomplete","done","instr","turnEditingOnText","turnEditingOn","getInplaceEditable","parent","querySelector","getValue","dataset","setValue","getItemId"],"mappings":"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"}