{"version":3,"file":"defaultcustom.min.js","sources":["../src/defaultcustom.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Functionality for the form element defaultcustom\r\n *\r\n * @module     core_form/defaultcustom\r\n * @copyright  2017 Marina Glancy\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @since      3.3\r\n */\r\ndefine(['jquery'], function($) {\r\n    var onChangeSelect = function(event) {\r\n        var element = $(event.target),\r\n            defaultvalue = JSON.parse(element.attr('data-defaultvalue')),\r\n            customvalue = JSON.parse(element.attr('data-customvalue')),\r\n            type = element.attr('data-type'),\r\n            form = element.closest('form'),\r\n            elementName = element.attr('name').replace(/\\[customize\\]$/, '[value]'),\r\n            newvalue = element.prop('checked') ? customvalue : defaultvalue;\r\n\r\n        if (type === 'text') {\r\n            form.find('[name=\"' + elementName + '\"]').val(newvalue);\r\n        } else if (type === 'date_selector') {\r\n            form.find('[name=\"' + elementName + '[day]\"]').val(newvalue.day);\r\n            form.find('[name=\"' + elementName + '[month]\"]').val(newvalue.month);\r\n            form.find('[name=\"' + elementName + '[year]\"]').val(newvalue.year);\r\n        } else if (type === 'date_time_selector') {\r\n            form.find('[name=\"' + elementName + '[day]\"]').val(newvalue.day);\r\n            form.find('[name=\"' + elementName + '[month]\"]').val(newvalue.month);\r\n            form.find('[name=\"' + elementName + '[year]\"]').val(newvalue.year);\r\n            form.find('[name=\"' + elementName + '[hour]\"]').val(newvalue.hour);\r\n            form.find('[name=\"' + elementName + '[minute]\"]').val(newvalue.minute);\r\n        }\r\n    };\r\n\r\n    var selector = 'input[data-defaultcustom=true]';\r\n    $('body').on('change', selector, onChangeSelect);\r\n});\r\n"],"names":["define","$","on","event","element","target","defaultvalue","JSON","parse","attr","customvalue","type","form","closest","elementName","replace","newvalue","prop","find","val","day","month","year","hour","minute"],"mappings":";;;;;;;;AAuBAA,iCAAO,CAAC,WAAW,SAASC,GA0BxBA,EAAE,QAAQC,GAAG,SADE,kCAxBM,SAASC,WACtBC,QAAUH,EAAEE,MAAME,QAClBC,aAAeC,KAAKC,MAAMJ,QAAQK,KAAK,sBACvCC,YAAcH,KAAKC,MAAMJ,QAAQK,KAAK,qBACtCE,KAAOP,QAAQK,KAAK,aACpBG,KAAOR,QAAQS,QAAQ,QACvBC,YAAcV,QAAQK,KAAK,QAAQM,QAAQ,iBAAkB,WAC7DC,SAAWZ,QAAQa,KAAK,WAAaP,YAAcJ,aAE1C,SAATK,KACAC,KAAKM,KAAK,UAAYJ,YAAc,MAAMK,IAAIH,UAC9B,kBAATL,MACPC,KAAKM,KAAK,UAAYJ,YAAc,WAAWK,IAAIH,SAASI,KAC5DR,KAAKM,KAAK,UAAYJ,YAAc,aAAaK,IAAIH,SAASK,OAC9DT,KAAKM,KAAK,UAAYJ,YAAc,YAAYK,IAAIH,SAASM,OAC7C,uBAATX,OACPC,KAAKM,KAAK,UAAYJ,YAAc,WAAWK,IAAIH,SAASI,KAC5DR,KAAKM,KAAK,UAAYJ,YAAc,aAAaK,IAAIH,SAASK,OAC9DT,KAAKM,KAAK,UAAYJ,YAAc,YAAYK,IAAIH,SAASM,MAC7DV,KAAKM,KAAK,UAAYJ,YAAc,YAAYK,IAAIH,SAASO,MAC7DX,KAAKM,KAAK,UAAYJ,YAAc,cAAcK,IAAIH,SAASQ"}