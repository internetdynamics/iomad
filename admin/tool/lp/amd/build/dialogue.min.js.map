{"version":3,"file":"dialogue.min.js","sources":["../src/dialogue.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Wrapper for the YUI M.core.notification class. Allows us to\r\n * use the YUI version in AMD code until it is replaced.\r\n *\r\n * @module     tool_lp/dialogue\r\n * @copyright  2015 Damyon Wiese <damyon@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['core/yui'], function(Y) {\r\n\r\n    // Private variables and functions.\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param {String} title Title for the window.\r\n     * @param {String} content The content for the window.\r\n     * @param {function} afterShow Callback executed after the window is opened.\r\n     * @param {function} afterHide Callback executed after the window is closed.\r\n     * @param {Boolean} wide Specify we want an extra wide dialogue (the size is standard, but wider than the default).\r\n     * @param {String} height The height of the dialogue.\r\n     */\r\n    var dialogue = function(title, content, afterShow, afterHide, wide, height) {\r\n        M.util.js_pending('tool_lp/dialogue:dialogue');\r\n\r\n        this.yuiDialogue = null;\r\n        var parent = this;\r\n\r\n        // Default for wide is false.\r\n        if (typeof wide == 'undefined') {\r\n            wide = false;\r\n        }\r\n\r\n        Y.use('moodle-core-notification', 'timers', function() {\r\n            var width = '480px';\r\n            if (wide) {\r\n                width = '800px';\r\n            }\r\n\r\n            if (!height) {\r\n                height = 'auto';\r\n            }\r\n\r\n            parent.yuiDialogue = new M.core.dialogue({\r\n                headerContent: title,\r\n                bodyContent: content,\r\n                draggable: true,\r\n                visible: false,\r\n                center: true,\r\n                modal: true,\r\n                width: width,\r\n                height: height\r\n            });\r\n\r\n            parent.yuiDialogue.before('visibleChange', function() {\r\n                M.util.js_pending('tool_lp/dialogue:before:visibleChange');\r\n            });\r\n\r\n            parent.yuiDialogue.after('visibleChange', function(e) {\r\n                if (e.newVal) {\r\n                    // Delay the callback call to the next tick, otherwise it can happen that it is\r\n                    // executed before the dialogue constructor returns.\r\n                    if ((typeof afterShow !== 'undefined')) {\r\n                        Y.soon(function() {\r\n                            afterShow(parent);\r\n                            parent.yuiDialogue.centerDialogue();\r\n                            M.util.js_complete('tool_lp/dialogue:before:visibleChange');\r\n                        });\r\n                    } else {\r\n                        M.util.js_complete('tool_lp/dialogue:before:visibleChange');\r\n                    }\r\n                } else {\r\n                    if ((typeof afterHide !== 'undefined')) {\r\n                        Y.soon(function() {\r\n                            afterHide(parent);\r\n                            M.util.js_complete('tool_lp/dialogue:before:visibleChange');\r\n                        });\r\n                    } else {\r\n                        M.util.js_complete('tool_lp/dialogue:before:visibleChange');\r\n                    }\r\n                }\r\n            });\r\n\r\n            parent.yuiDialogue.show();\r\n            M.util.js_complete('tool_lp/dialogue:dialogue');\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Close this window.\r\n     */\r\n    dialogue.prototype.close = function() {\r\n        this.yuiDialogue.hide();\r\n        this.yuiDialogue.destroy();\r\n    };\r\n\r\n    /**\r\n     * Get content.\r\n     * @return {node}\r\n     */\r\n    dialogue.prototype.getContent = function() {\r\n        return this.yuiDialogue.bodyNode.getDOMNode();\r\n    };\r\n\r\n    return /** @alias module:tool_lp/dialogue */ dialogue;\r\n});\r\n"],"names":["define","Y","dialogue","title","content","afterShow","afterHide","wide","height","M","util","js_pending","yuiDialogue","parent","this","use","width","core","headerContent","bodyContent","draggable","visible","center","modal","before","after","e","newVal","soon","centerDialogue","js_complete","show","prototype","close","hide","destroy","getContent","bodyNode","getDOMNode"],"mappings":";;;;;;;;AAuBAA,0BAAO,CAAC,aAAa,SAASC,OAatBC,SAAW,SAASC,MAAOC,QAASC,UAAWC,UAAWC,KAAMC,QAChEC,EAAEC,KAAKC,WAAW,kCAEbC,YAAc,SACfC,OAASC,UAGM,IAARP,OACPA,MAAO,GAGXN,EAAEc,IAAI,2BAA4B,UAAU,eACpCC,MAAQ,QACRT,OACAS,MAAQ,SAGPR,SACDA,OAAS,QAGbK,OAAOD,YAAc,IAAIH,EAAEQ,KAAKf,SAAS,CACrCgB,cAAef,MACfgB,YAAaf,QACbgB,WAAW,EACXC,SAAS,EACTC,QAAQ,EACRC,OAAO,EACPP,MAAOA,MACPR,OAAQA,SAGZK,OAAOD,YAAYY,OAAO,iBAAiB,WACvCf,EAAEC,KAAKC,WAAW,4CAGtBE,OAAOD,YAAYa,MAAM,iBAAiB,SAASC,GAC3CA,EAAEC,YAGwB,IAAdtB,UACRJ,EAAE2B,MAAK,WACHvB,UAAUQ,QACVA,OAAOD,YAAYiB,iBACnBpB,EAAEC,KAAKoB,YAAY,4CAGvBrB,EAAEC,KAAKoB,YAAY,8CAGG,IAAdxB,UACRL,EAAE2B,MAAK,WACHtB,UAAUO,QACVJ,EAAEC,KAAKoB,YAAY,4CAGvBrB,EAAEC,KAAKoB,YAAY,4CAK/BjB,OAAOD,YAAYmB,OACnBtB,EAAEC,KAAKoB,YAAY,wCAO3B5B,SAAS8B,UAAUC,MAAQ,gBAClBrB,YAAYsB,YACZtB,YAAYuB,WAOrBjC,SAAS8B,UAAUI,WAAa,kBACrBtB,KAAKF,YAAYyB,SAASC,cAGQpC"}