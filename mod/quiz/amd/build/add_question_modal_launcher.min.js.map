{"version":3,"file":"add_question_modal_launcher.min.js","sources":["../src/add_question_modal_launcher.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Initialise the an add question modal on the quiz page.\r\n *\r\n * @module    mod_quiz/add_question_modal_launcher\r\n * @copyright 2018 Ryan Wyllie <ryan@moodle.com>\r\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'core/notification',\r\n        'core/modal_factory',\r\n    ],\r\n    function(\r\n        $,\r\n        Notification,\r\n        ModalFactory\r\n    ) {\r\n\r\n    return {\r\n        /**\r\n         * Create a modal using the modal factory and add listeners to launch the\r\n         * modal when clicked.\r\n         *\r\n         * @param  {string} modalType Which modal to create\r\n         * @param  {string} selector The selectors for the elements that trigger the modal\r\n         * @param  {int} contextId The current context id\r\n         * @param  {function} preShowCallback A callback to execute before the modal is shown\r\n         * @param  {boolean} showNewCategory  Display the New category tab when selecting random questions.\r\n         * @return {promise} Resolved with the modal\r\n         */\r\n        init: function(modalType, selector, contextId, preShowCallback, showNewCategory = true) {\r\n            var body = $('body');\r\n            let templateContext = {\r\n                hidden: showNewCategory,\r\n            };\r\n\r\n            // Create a question bank modal using the factory.\r\n            // The same modal will be used by all of the add question\r\n            // links that match \"selector\" on the page. The content\r\n            // of the modal will be changed depending on which link is\r\n            // clicked.\r\n            return ModalFactory.create(\r\n                {\r\n                    type: modalType,\r\n                    large: true,\r\n                    templateContext: templateContext,\r\n                    // This callback executes before the modal is shown when the\r\n                    // trigger element is clicked.\r\n                    preShowCallback: function(triggerElement, modal) {\r\n                        triggerElement = $(triggerElement);\r\n                        modal.setContextId(contextId);\r\n                        modal.setAddOnPageId(triggerElement.attr('data-addonpage'));\r\n                        modal.setTitle(triggerElement.attr('data-header'));\r\n\r\n                        if (preShowCallback) {\r\n                            preShowCallback(triggerElement, modal);\r\n                        }\r\n                    }\r\n                },\r\n                // Created a deligated listener rather than a single\r\n                // trigger element.\r\n                [body, selector]\r\n            ).fail(Notification.exception);\r\n        }\r\n    };\r\n});\r\n"],"names":["define","$","Notification","ModalFactory","init","modalType","selector","contextId","preShowCallback","showNewCategory","body","templateContext","hidden","create","type","large","triggerElement","modal","setContextId","setAddOnPageId","attr","setTitle","fail","exception"],"mappings":";;;;;;;AAsBAA,8CACI,CACI,SACA,oBACA,uBAEJ,SACIC,EACAC,aACAC,oBAGG,CAYHC,KAAM,SAASC,UAAWC,SAAUC,UAAWC,qBAAiBC,+EACxDC,KAAOT,EAAE,YACTU,gBAAkB,CAClBC,OAAQH,wBAQLN,aAAaU,OAChB,CACIC,KAAMT,UACNU,OAAO,EACPJ,gBAAiBA,gBAGjBH,gBAAiB,SAASQ,eAAgBC,OACtCD,eAAiBf,EAAEe,gBACnBC,MAAMC,aAAaX,WACnBU,MAAME,eAAeH,eAAeI,KAAK,mBACzCH,MAAMI,SAASL,eAAeI,KAAK,gBAE/BZ,iBACAA,gBAAgBQ,eAAgBC,SAM5C,CAACP,KAAMJ,WACTgB,KAAKpB,aAAaqB"}