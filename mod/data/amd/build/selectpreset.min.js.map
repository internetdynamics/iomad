{"version":3,"file":"selectpreset.min.js","sources":["../src/selectpreset.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Javascript module to control the form responsible for selecting a preset.\r\n *\r\n * @module      mod_data/selectpreset\r\n * @copyright   2021 Mihail Geshoski <mihail@moodle.com>\r\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nconst selectors = {\r\n    presetRadioButton: 'input[name=\"fullname\"]',\r\n    selectPresetButton: 'input[name=\"selectpreset\"]',\r\n    selectedPresetRadioButton: 'input[name=\"fullname\"]:checked',\r\n};\r\n\r\n/**\r\n * Initialize module.\r\n */\r\nexport const init = () => {\r\n    const radioButton = document.querySelectorAll(selectors.presetRadioButton);\r\n\r\n    // Initialize the \"Use a preset\" button properly.\r\n    disableUsePresetButton();\r\n\r\n    radioButton.forEach((elem) => {\r\n        elem.addEventListener('change', function(event) {\r\n            event.preventDefault();\r\n            // Enable the \"Use a preset\" button when any of the radio buttons in the presets list is checked.\r\n            disableUsePresetButton();\r\n        });\r\n    });\r\n\r\n};\r\n\r\n/**\r\n * Decide whether to disable or not the \"Use a preset\" button.\r\n * When there is no preset selected, the button should be displayed disabled; otherwise, it will appear enabled as a primary button.\r\n *\r\n * @method\r\n * @private\r\n */\r\nconst disableUsePresetButton = () => {\r\n    let selectPresetButton = document.querySelector(selectors.selectPresetButton);\r\n    const selectedRadioButton = document.querySelector(selectors.selectedPresetRadioButton);\r\n\r\n    if (selectedRadioButton) {\r\n        // There is one preset selected, so the button should be enabled.\r\n        selectPresetButton.removeAttribute('disabled');\r\n        selectPresetButton.classList.remove('btn-secondary');\r\n        selectPresetButton.classList.add('btn-primary');\r\n        selectPresetButton.setAttribute('data-presetname', selectedRadioButton.getAttribute('value'));\r\n        selectPresetButton.setAttribute('data-cmid', selectedRadioButton.getAttribute('data-cmid'));\r\n    } else {\r\n        // There is no any preset selected, so the button should be disabled.\r\n        selectPresetButton.setAttribute('disabled', true);\r\n        selectPresetButton.classList.remove('btn-primary');\r\n        selectPresetButton.classList.add('btn-secondary');\r\n        selectPresetButton.removeAttribute('data-presetname');\r\n        selectPresetButton.removeAttribute('data-cmid');\r\n    }\r\n};\r\n"],"names":["selectors","radioButton","document","querySelectorAll","disableUsePresetButton","forEach","elem","addEventListener","event","preventDefault","selectPresetButton","querySelector","selectedRadioButton","removeAttribute","classList","remove","add","setAttribute","getAttribute"],"mappings":";;;;;;;;MAuBMA,4BACiB,yBADjBA,6BAEkB,6BAFlBA,oCAGyB,+CAMX,WACVC,YAAcC,SAASC,iBAAiBH,6BAG9CI,yBAEAH,YAAYI,SAASC,OACjBA,KAAKC,iBAAiB,UAAU,SAASC,OACrCA,MAAMC,iBAENL,sCAaNA,uBAAyB,SACvBM,mBAAqBR,SAASS,cAAcX,oCAC1CY,oBAAsBV,SAASS,cAAcX,qCAE/CY,qBAEAF,mBAAmBG,gBAAgB,YACnCH,mBAAmBI,UAAUC,OAAO,iBACpCL,mBAAmBI,UAAUE,IAAI,eACjCN,mBAAmBO,aAAa,kBAAmBL,oBAAoBM,aAAa,UACpFR,mBAAmBO,aAAa,YAAaL,oBAAoBM,aAAa,gBAG9ER,mBAAmBO,aAAa,YAAY,GAC5CP,mBAAmBI,UAAUC,OAAO,eACpCL,mBAAmBI,UAAUE,IAAI,iBACjCN,mBAAmBG,gBAAgB,mBACnCH,mBAAmBG,gBAAgB"}